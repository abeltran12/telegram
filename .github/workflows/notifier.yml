name: Notifier

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  notifyTelegram:
    runs-on: ubuntu-latest
    steps:
    - name: Send custom message
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_TO }}
        token: ${{ secrets.TELEGRAM_TOKEN }}
        message: |
          ğŸ”” **GitHub Notification** ğŸ””
          
          ğŸ“Œ **Evento:** ${{ github.event_name }}
          ğŸ‘¤ **Usuario:** ${{ github.actor }}
          ğŸ“‚ **Repositorio:** ${{ github.repository }}
          ğŸ”„ **AcciÃ³n:** ${{ github.event.action || 'N/A' }}
          ğŸ”€ **Rama:** ${{ github.ref }}
          
          ğŸ“œ **Ãšltimo commit:**
          ğŸ†” **SHA:** ${{ github.sha }}
          ğŸ“ **Mensaje:** ${{ github.event.head_commit.message }}
          ğŸ•’ **Fecha:** ${{ github.event.head_commit.timestamp }}
          
          ğŸ“ **Ver cambios:** [ğŸ”— Commit](${{
            github.server_url }}/${{ github.repository }}/commit/${{ github.sha }})

          ğŸ“¢ **Detalles adicionales:**
          - ğŸ·ï¸ **Tipo de evento:** ${{ github.event_name }}
          - ğŸ—ï¸ **Workflow ejecutado:** ${{ github.workflow }}
          - ğŸ–¥ï¸ **Job ejecutado:** ${{ github.job }}
          - ğŸ› ï¸ **Ejecutado en:** ${{ runner.os }}

    - name: Send Pull Request details
      if: github.event_name == 'pull_request'
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_TO }}
        token: ${{ secrets.TELEGRAM_TOKEN }}
        message: |
          ğŸ”€ **Pull Request Detalles:**
          - ğŸ†• **TÃ­tulo:** ${{ github.event.pull_request.title }}
          - ğŸ“ **DescripciÃ³n:** ${{ github.event.pull_request.body || 'Sin descripciÃ³n' }}
          - ğŸ” **PR URL:** [ğŸ”— Ver PR](${{
            github.event.pull_request.html_url }})